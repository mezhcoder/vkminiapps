{"version":3,"sources":["../../../src/components/ModalCard/ModalCard.tsx"],"names":["useContext","PanelHeaderButton","getClassName","classNames","Icon24Dismiss","IOS","hasReactNode","withPlatform","withAdaptivity","ViewHeight","ViewWidth","Subhead","Title","ModalDismissButton","ModalRootContext","useModalRegistry","ModalType","getNavId","ModalCard","props","icon","header","subheader","children","actions","actionsLayout","onClose","platform","viewWidth","viewHeight","hasMouse","nav","restProps","isDesktop","SMALL_TABLET","MEDIUM","canShowCloseBtn","canShowCloseBtnIos","modalContext","CARD","refs","innerElement","defaultProps"],"mappings":"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","sourcesContent":["import { HTMLAttributes, ReactNode, FC, useContext } from 'react';\nimport PanelHeaderButton from '../PanelHeaderButton/PanelHeaderButton';\nimport { getClassName } from '../../helpers/getClassName';\nimport { classNames } from '../../lib/classNames';\nimport { Icon24Dismiss } from '@vkontakte/icons';\nimport { IOS } from '../../lib/platform';\nimport { hasReactNode } from '../../lib/utils';\nimport { withPlatform } from '../../hoc/withPlatform';\nimport { HasPlatform } from '../../types';\nimport { withAdaptivity, AdaptivityProps, ViewHeight, ViewWidth } from '../../hoc/withAdaptivity';\nimport Subhead from '../Typography/Subhead/Subhead';\nimport Title from '../Typography/Title/Title';\nimport ModalDismissButton from '../ModalDismissButton/ModalDismissButton';\nimport ModalRootContext, { useModalRegistry } from '../ModalRoot/ModalRootContext';\nimport { ModalType } from '../ModalRoot/types';\nimport { getNavId, NavIdProps } from '../../lib/getNavId';\n\nexport interface ModalCardProps extends HTMLAttributes<HTMLElement>, HasPlatform, AdaptivityProps, NavIdProps {\n  /**\n   * Иконка.\n   *\n   * Может быть компонентом иконки, например, `<Icon56MoneyTransferOutline />`, или `<Avatar size={72} src=\"\" />`\n   */\n  icon?: ReactNode;\n\n  /**\n   * Заголовок карточки\n   */\n  header?: ReactNode;\n\n  /**\n   * Подзаголовок\n   */\n  subheader?: ReactNode;\n\n  /**\n   * Кнопки-действия.\n   *\n   * Рекомендуется использовать `<Button size=\"l\" mode=\"primary\" />` или `<Button size=\"l\" mode=\"secondary\" />`\n   */\n  actions?: ReactNode;\n\n  /**\n   * Тип отображения кнопок: вертикальный или горизонтальный\n   */\n  actionsLayout?: 'vertical' | 'horizontal';\n\n  /**\n   * Будет вызван при закрытии карточки жестом\n   */\n  onClose?: VoidFunction;\n}\n\nconst ModalCard: FC<ModalCardProps> = (props: ModalCardProps) => {\n  const {\n    icon,\n    header,\n    subheader,\n    children,\n    actions,\n    actionsLayout,\n    onClose,\n    platform,\n    viewWidth,\n    viewHeight,\n    hasMouse,\n    nav,\n    ...restProps\n  } = props;\n\n  const isDesktop = viewWidth >= ViewWidth.SMALL_TABLET && (hasMouse || viewHeight >= ViewHeight.MEDIUM);\n  const canShowCloseBtn = viewWidth >= ViewWidth.SMALL_TABLET;\n  const canShowCloseBtnIos = platform === IOS && !canShowCloseBtn;\n\n  const modalContext = useContext(ModalRootContext);\n  const { refs } = useModalRegistry(getNavId(props), ModalType.CARD);\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(getClassName('ModalCard', platform), {\n        'ModalCard--desktop': isDesktop,\n      })}\n    >\n      <div vkuiClass=\"ModalCard__in\" ref={refs.innerElement}>\n        <div vkuiClass=\"ModalCard__container\">\n          {hasReactNode(icon) && <div vkuiClass=\"ModalCard__icon\">{icon}</div>}\n          {hasReactNode(header) && <Title level=\"2\" weight=\"semibold\" vkuiClass=\"ModalCard__header\">{header}</Title>}\n          {hasReactNode(subheader) && <Subhead weight=\"regular\" vkuiClass=\"ModalCard__subheader\">{subheader}</Subhead>}\n\n          {children}\n\n          {hasReactNode(actions) &&\n          <div vkuiClass={classNames('ModalCard__actions', {\n            'ModalCard__actions--v': actionsLayout === 'vertical',\n          })}>\n            {actions}\n          </div>\n          }\n\n          {canShowCloseBtn && <ModalDismissButton onClick={onClose || modalContext.onClose} />}\n          {canShowCloseBtnIos &&\n          <PanelHeaderButton vkuiClass=\"ModalCard__dismiss\" onClick={onClose || modalContext.onClose}>\n            <Icon24Dismiss />\n          </PanelHeaderButton>\n          }\n        </div>\n      </div>\n    </div>\n  );\n};\n\nModalCard.defaultProps = {\n  actionsLayout: 'horizontal',\n};\n\nexport default withAdaptivity(withPlatform(ModalCard), {\n  viewWidth: true,\n  viewHeight: true,\n  hasMouse: true,\n});\n"],"file":"ModalCard.js"}