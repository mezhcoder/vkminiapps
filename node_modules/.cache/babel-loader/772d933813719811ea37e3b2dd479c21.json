{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport React, { useEffect, useRef } from 'react';\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport { ScrollSaver } from \"./ScrollSaver\";\nimport { getNavId } from \"../../lib/getNavId\";\nexport var Epic = function Epic(props) {\n  var platform = usePlatform();\n  var scroll = useRef({}).current;\n\n  var activeStory = props.activeStory,\n      tabbar = props.tabbar,\n      children = props.children,\n      viewWidth = props.viewWidth,\n      restProps = _objectWithoutProperties(props, [\"activeStory\", \"tabbar\", \"children\", \"viewWidth\"]);\n\n  useEffect(function () {\n    if (!tabbar && viewWidth < ViewWidth.SMALL_TABLET) {\n      console.warn('[Epic] Using Epic without tabbar is not recommended on mobile');\n    }\n  }, [viewWidth]);\n  var story = React.Children.toArray(children).find(function (story) {\n    return getNavId(story.props) === activeStory;\n  }) || null;\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: getClassName('Epic', platform)\n  }), createScopedElement(ScrollSaver, {\n    key: activeStory,\n    initialScroll: scroll[activeStory] || 0,\n    saveScroll: function saveScroll(value) {\n      return scroll[activeStory] = value;\n    }\n  }, story), tabbar);\n};\nexport default withAdaptivity(Epic, {\n  viewWidth: true\n});","map":{"version":3,"sources":["../../../src/components/Epic/Epic.tsx"],"names":["Epic","platform","usePlatform","scroll","useRef","activeStory","tabbar","children","viewWidth","restProps","props","useEffect","ViewWidth","console","story","React","getNavId","getClassName","withAdaptivity"],"mappings":";;;AAAA,OAAA,KAAA,IAAA,SAAA,EAAA,MAAA,QAAA,OAAA;AACA,SAAA,YAAA,QAAA,4BAAA;AACA,SAAA,WAAA,QAAA,yBAAA;AACA,SAAA,cAAA,EAAA,SAAA,QAAA,0BAAA;AACA,SAAA,WAAA,QAAA,eAAA;AACA,SAAA,QAAA,QAAA,oBAAA;AAOA,OAAO,IAAMA,IAAmB,GAAG,SAAtBA,IAAsB,CAAA,KAAA,EAAsB;AACvD,MAAMC,QAAQ,GAAGC,WAAjB,EAAA;AACA,MAAMC,MAAM,GAAGC,MAAM,CAANA,EAAM,CAANA,CAAf,OAAA;;AAFuD,MAG/CC,WAH+C,GAGYK,KAHZ,CAAA,WAAA;AAAA,MAGlCJ,MAHkC,GAGYI,KAHZ,CAAA,MAAA;AAAA,MAG1BH,QAH0B,GAGYG,KAHZ,CAAA,QAAA;AAAA,MAGhBF,SAHgB,GAGYE,KAHZ,CAAA,SAAA;AAAA,MAGFD,SAHE,GAAA,wBAAA,CAAA,KAAA,EAAA,CAAA,aAAA,EAAA,QAAA,EAAA,UAAA,EAAA,WAAA,CAAA,CAAA;;AAKvDE,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAAA,MAAA,IAAWH,SAAS,GAAGI,SAAS,CAApC,YAAA,EAAmD;AACjDC,MAAAA,OAAO,CAAPA,IAAAA,CAAAA,+DAAAA;AACD;AAHM,GAAA,EAIN,CAJHF,SAIG,CAJM,CAATA;AAKA,MAAMG,KAAK,GAAIC,KAAK,CAALA,QAAAA,CAAAA,OAAAA,CAAD,QAACA,EAAD,IAACA,CAAyD,UAAA,KAAA,EAAA;AAAA,WAAWC,QAAQ,CAACF,KAAK,CAAdE,KAAQ,CAARA,KAAX,WAAA;AAA1D,GAACD,KAAf,IAAA;AAEA,SACE,mBAAA,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EAAA,SAAA,EAAA;AAAoB,IAAA,SAAS,EAAEE,YAAY,CAAA,MAAA,EAAA,QAAA;AAA3C,GAAA,CAAA,EACE,mBAAA,CAAA,WAAA,EAAA;AACE,IAAA,GAAG,EADL,WAAA;AAEE,IAAA,aAAa,EAAEd,MAAM,CAANA,WAAM,CAANA,IAFjB,CAAA;AAGE,IAAA,UAAU,EAAE,SAAA,UAAA,CAAA,KAAA,EAAA;AAAA,aAAWA,MAAM,CAANA,WAAM,CAANA,GAAX,KAAA;AAAA;AAHd,GAAA,EADF,KACE,CADF,EADF,MACE,CADF;AAZK,CAAA;AAwBP,eAAee,cAAc,CAAA,IAAA,EAAO;AAClCV,EAAAA,SAAS,EAAE;AADuB,CAAP,CAA7B","sourcesContent":["import React, { HTMLAttributes, ReactNode, ReactElement, FC, useEffect, useRef } from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { withAdaptivity, ViewWidth, AdaptivityProps } from '../../hoc/withAdaptivity';\nimport { ScrollSaver } from './ScrollSaver';\nimport { getNavId } from '../../lib/getNavId';\n\nexport interface EpicProps extends HTMLAttributes<HTMLDivElement>, AdaptivityProps {\n  tabbar?: ReactNode;\n  activeStory: string;\n}\n\nexport const Epic: FC<EpicProps> = (props: EpicProps) => {\n  const platform = usePlatform();\n  const scroll = useRef<{ [key: string]: number }>({}).current;\n  const { activeStory, tabbar, children, viewWidth, ...restProps } = props;\n\n  useEffect(() => {\n    if (!tabbar && viewWidth < ViewWidth.SMALL_TABLET) {\n      console.warn('[Epic] Using Epic without tabbar is not recommended on mobile');\n    }\n  }, [viewWidth]);\n  const story = (React.Children.toArray(children) as ReactElement[]).find((story) => getNavId(story.props) === activeStory) || null;\n\n  return (\n    <div {...restProps} vkuiClass={getClassName('Epic', platform)}>\n      <ScrollSaver\n        key={activeStory}\n        initialScroll={scroll[activeStory] || 0}\n        saveScroll={(value) => scroll[activeStory] = value}\n      >{story}</ScrollSaver>\n      {tabbar}\n    </div>\n  );\n};\n\nexport default withAdaptivity(Epic, {\n  viewWidth: true,\n});\n"]},"metadata":{},"sourceType":"module"}